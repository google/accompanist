<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>WebView</title>
<link href="../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../";</script>    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script src="https://unpkg.com/kotlin-playground@1"></script><script type="text/javascript" src="../../scripts/sourceset_dependencies.js" async></script>
<link href="../../styles/style.css" rel="Stylesheet">
<link href="../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../styles/main.css" rel="Stylesheet">
<link href="../../styles/prism.css" rel="Stylesheet">
<link href="../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
<a href="../../index.html">
<span>accompanist</span>            </a>    </div>
    <div>
    </div>
    <div class="pull-right d-flex">
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":web:dokkaHtmlPartial/release">androidJvm</button>
        </div>
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" data-page-type="member" id="content" pageids="web::com.google.accompanist.web//WebView/#com.google.accompanist.web.WebViewState#androidx.compose.ui.Modifier#kotlin.Boolean#com.google.accompanist.web.WebViewNavigator#kotlin.Function1[android.webkit.WebView,kotlin.Unit]#kotlin.Function1[android.webkit.WebView,kotlin.Unit]#com.google.accompanist.web.AccompanistWebViewClient#com.google.accompanist.web.AccompanistWebChromeClient#kotlin.Function1[android.content.Context,android.webkit.WebView]?/PointingToDeclaration//-870575855">
  <div class="breadcrumbs"><a href="../index.html">web</a><span class="delimiter">/</span><a href="index.html">com.google.accompanist.web</a><span class="delimiter">/</span><span class="current">WebView</span></div>
  <div class="cover ">
    <h1 class="cover"><span>Web</span><wbr><span><span>View</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":web:dokkaHtmlPartial/release"><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword"></span><span class="token keyword">fun </span><a href="-web-view.html"><span class="token function">WebView</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">state<span class="token operator">: </span><a href="-web-view-state/index.html">WebViewState</a><span class="token punctuation">, </span></span><span class="parameter ">modifier<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier.html">Modifier</a><span class="token operator"> = </span>Modifier<span class="token punctuation">, </span></span><span class="parameter ">captureBackPresses<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html">Boolean</a><span class="token operator"> = </span><span class="token boolean">true</span><span class="token punctuation">, </span></span><span class="parameter ">navigator<span class="token operator">: </span><a href="-web-view-navigator/index.html">WebViewNavigator</a><span class="token operator"> = </span>rememberWebViewNavigator()<span class="token punctuation">, </span></span><span class="parameter ">onCreated<span class="token operator">: </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/webkit/WebView.html">WebView</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}<span class="token punctuation">, </span></span><span class="parameter ">onDispose<span class="token operator">: </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/webkit/WebView.html">WebView</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}<span class="token punctuation">, </span></span><span class="parameter ">client<span class="token operator">: </span><a href="-accompanist-web-view-client/index.html">AccompanistWebViewClient</a><span class="token operator"> = </span>remember { AccompanistWebViewClient() }<span class="token punctuation">, </span></span><span class="parameter ">chromeClient<span class="token operator">: </span><a href="-accompanist-web-chrome-client/index.html">AccompanistWebChromeClient</a><span class="token operator"> = </span>remember { AccompanistWebChromeClient() }<span class="token punctuation">, </span></span><span class="parameter ">factory<span class="token operator">: </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/content/Context.html">Context</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/webkit/WebView.html">WebView</a><span class="token operator">?</span><span class="token operator"> = </span>null</span></span><span class="token punctuation">)</span></div><p class="paragraph">A wrapper around the Android View WebView to provide a basic WebView composable.</p><p class="paragraph">If you require more customisation you are most likely better rolling your own and using this wrapper as an example.</p><p class="paragraph">The WebView attempts to set the layoutParams based on the Compose modifier passed in. If it is incorrectly sizing, use the layoutParams composable function instead.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>state</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The webview state holder where the Uri to load is defined.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>modifier</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A compose modifier</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>capture</span><wbr><span>Back</span><wbr><span><span>Presses</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Set to true to have this Composable capture back presses and navigate the WebView back.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>navigator</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional navigator object that can be used to control the WebView's navigation from outside the composable.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Created</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Called when the WebView is first created, this can be used to set additional settings on the WebView. WebChromeClient and WebViewClient should not be set here as they will be subsequently overwritten after this lambda is called.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Dispose</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Called when the WebView is destroyed. Provides a bundle which can be saved if you need to save and restore state in this WebView.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>client</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Provides access to WebViewClient via subclassing</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>chrome</span><wbr><span><span>Client</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Provides access to WebChromeClient via subclassing</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>factory</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional WebView factory for using a custom subclass of WebView</p></div></div></div></div></div><h4 class="">Samples</h4><div class="sample-container"><pre><code class="runnablesample monospace block lang-kotlin" theme="idea">import android.annotation.SuppressLint
import android.graphics.Bitmap
import android.os.Bundle
import android.util.Log
import android.webkit.WebView
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.Image
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.material.Button
import androidx.compose.material.Icon
import androidx.compose.material.IconButton
import androidx.compose.material.LinearProgressIndicator
import androidx.compose.material.OutlinedTextField
import androidx.compose.material.Text
import androidx.compose.material.TopAppBar
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ArrowBack
import androidx.compose.material.icons.filled.Error
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.ColorFilter
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import com.google.accompanist.sample.AccompanistSampleTheme
import com.google.accompanist.web.AccompanistWebViewClient
import com.google.accompanist.web.LoadingState
import com.google.accompanist.web.WebView
import com.google.accompanist.web.rememberWebViewNavigator
import com.google.accompanist.web.rememberWebViewState
fun main() { 
   //sampleStart 
   class BasicWebViewSample : ComponentActivity() {
    val initialUrl = "https://google.com"
    @SuppressLint("SetJavaScriptEnabled")
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            AccompanistSampleTheme {
                val state = rememberWebViewState(url = initialUrl)
                val navigator = rememberWebViewNavigator()
                var textFieldValue by remember(state.lastLoadedUrl) {
                    mutableStateOf(state.lastLoadedUrl)
                }

                Column {
                    TopAppBar(
                        title = { Text(text = "WebView Sample") },
                        navigationIcon = {
                            if (navigator.canGoBack) {
                                IconButton(onClick = { navigator.navigateBack() }) {
                                    Icon(
                                        imageVector = Icons.Default.ArrowBack,
                                        contentDescription = "Back"
                                    )
                                }
                            }
                        }
                    )

                    Row {
                        Box(modifier = Modifier.weight(1f)) {
                            if (state.errorsForCurrentRequest.isNotEmpty()) {
                                Image(
                                    imageVector = Icons.Default.Error,
                                    contentDescription = "Error",
                                    colorFilter = ColorFilter.tint(Color.Red),
                                    modifier = Modifier
                                        .align(Alignment.CenterEnd)
                                        .padding(8.dp)
                                )
                            }

                            OutlinedTextField(
                                value = textFieldValue ?: "",
                                onValueChange = { textFieldValue = it },
                                modifier = Modifier.fillMaxWidth()
                            )
                        }

                        Button(
                            onClick = {
                                textFieldValue?.let {
                                    navigator.loadUrl(it)
                                }
                            },
                            modifier = Modifier.align(Alignment.CenterVertically)
                        ) {
                            Text("Go")
                        }
                    }

                    val loadingState = state.loadingState
                    if (loadingState is LoadingState.Loading) {
                        LinearProgressIndicator(
                            progress = loadingState.progress,
                            modifier = Modifier.fillMaxWidth()
                        )
                    }

                    // A custom WebViewClient and WebChromeClient can be provided via subclassing
                    val webClient = remember {
                        object : AccompanistWebViewClient() {
                            override fun onPageStarted(
                                view: WebView,
                                url: String?,
                                favicon: Bitmap?
                            ) {
                                super.onPageStarted(view, url, favicon)
                                Log.d("Accompanist WebView", "Page started loading for $url")
                            }
                        }
                    }

                    WebView(
                        state = state,
                        modifier = Modifier
                            .weight(1f),
                        navigator = navigator,
                        onCreated = { webView -&gt;
                            webView.settings.javaScriptEnabled = true
                        },
                        client = webClient
                    )
                }
            }
        }
    }
} 
   //sampleEnd
}</code></pre></div><hr><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword"></span><span class="token keyword">fun </span><a href="-web-view.html"><span class="token function">WebView</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">state<span class="token operator">: </span><a href="-web-view-state/index.html">WebViewState</a><span class="token punctuation">, </span></span><span class="parameter ">layoutParams<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/android/widget/FrameLayout.LayoutParams.html">FrameLayout.LayoutParams</a><span class="token punctuation">, </span></span><span class="parameter ">modifier<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier.html">Modifier</a><span class="token operator"> = </span>Modifier<span class="token punctuation">, </span></span><span class="parameter ">captureBackPresses<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html">Boolean</a><span class="token operator"> = </span><span class="token boolean">true</span><span class="token punctuation">, </span></span><span class="parameter ">navigator<span class="token operator">: </span><a href="-web-view-navigator/index.html">WebViewNavigator</a><span class="token operator"> = </span>rememberWebViewNavigator()<span class="token punctuation">, </span></span><span class="parameter ">onCreated<span class="token operator">: </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/webkit/WebView.html">WebView</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}<span class="token punctuation">, </span></span><span class="parameter ">onDispose<span class="token operator">: </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/webkit/WebView.html">WebView</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}<span class="token punctuation">, </span></span><span class="parameter ">client<span class="token operator">: </span><a href="-accompanist-web-view-client/index.html">AccompanistWebViewClient</a><span class="token operator"> = </span>remember { AccompanistWebViewClient() }<span class="token punctuation">, </span></span><span class="parameter ">chromeClient<span class="token operator">: </span><a href="-accompanist-web-chrome-client/index.html">AccompanistWebChromeClient</a><span class="token operator"> = </span>remember { AccompanistWebChromeClient() }<span class="token punctuation">, </span></span><span class="parameter ">factory<span class="token operator">: </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/content/Context.html">Context</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://developer.android.com/reference/kotlin/android/webkit/WebView.html">WebView</a><span class="token operator">?</span><span class="token operator"> = </span>null</span></span><span class="token punctuation">)</span></div><p class="paragraph">A wrapper around the Android View WebView to provide a basic WebView composable.</p><p class="paragraph">If you require more customisation you are most likely better rolling your own and using this wrapper as an example.</p><p class="paragraph">The WebView attempts to set the layoutParams based on the Compose modifier passed in. If it is incorrectly sizing, use the layoutParams composable function instead.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>state</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The webview state holder where the Uri to load is defined.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>layout</span><wbr><span><span>Params</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A FrameLayout.LayoutParams object to custom size the underlying WebView.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>modifier</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A compose modifier</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>capture</span><wbr><span>Back</span><wbr><span><span>Presses</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Set to true to have this Composable capture back presses and navigate the WebView back.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>navigator</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional navigator object that can be used to control the WebView's navigation from outside the composable.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Created</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Called when the WebView is first created, this can be used to set additional settings on the WebView. WebChromeClient and WebViewClient should not be set here as they will be subsequently overwritten after this lambda is called.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Dispose</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Called when the WebView is destroyed. Provides a bundle which can be saved if you need to save and restore state in this WebView.</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>client</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Provides access to WebViewClient via subclassing</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>chrome</span><wbr><span><span>Client</span></span></u></div></span></div><div><div class="title"><p class="paragraph">Provides access to WebChromeClient via subclassing</p></div></div></div></div><div class="table-row" data-filterable-current=":web:dokkaHtmlPartial/release" data-filterable-set=":web:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>factory</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional WebView factory for using a custom subclass of WebView</p></div></div></div></div></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>Â© 2023 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>
</body>
</html>

